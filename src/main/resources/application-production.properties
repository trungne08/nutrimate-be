# --- SERVER CONFIG ---
server.port=${PORT:8080}
# üëá D√íNG C·ª®U TINH: Gi√∫p OAuth2 nh·∫≠n di·ªán ƒë√∫ng HTTPS tr√™n Railway/Render
server.forward-headers-strategy=native

# --- DATABASE (Aiven MySQL) ---
# Th√™m ?ssl-mode=REQUIRED ƒë·ªÉ b·∫£o m·∫≠t k·∫øt n·ªëi v·ªõi Aiven
spring.datasource.url=jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}?ssl-mode=REQUIRED
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}

# --- JPA / HIBERNATE ---
# D√πng validate l√† chu·∫©n b√†i khi ƒë√£ c√≥ b·∫£ng
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
# Fix l·ªói c√∫ ph√°p SQL (ƒë·∫∑c bi·ªát v·ªõi b·∫£ng c√≥ t√™n tr√πng t·ª´ kh√≥a)
spring.jpa.properties.hibernate.globally_quoted_identifiers=true

# --- OAUTH2 COGNITO ---
spring.security.oauth2.client.registration.cognito.client-id=${COGNITO_CLIENT_ID}
spring.security.oauth2.client.registration.cognito.client-secret=${COGNITO_CLIENT_SECRET}
spring.security.oauth2.client.registration.cognito.scope=openid,email,profile
spring.security.oauth2.client.registration.cognito.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}
spring.security.oauth2.client.registration.cognito.authorization-grant-type=authorization_code
spring.security.oauth2.client.provider.cognito.issuer-uri=${COGNITO_ISSUER_URI}
spring.security.oauth2.client.registration.cognito.client-name=Cognito

# --- CORS CONFIG ---
# Cho ph√©p Localhost V√Ä Frontend th·∫≠t (ƒë·∫∑t trong bi·∫øn m√¥i tr∆∞·ªùng FRONTEND_URL)
# V√≠ d·ª• tr√™n Railway set FRONTEND_URL = https://nutrimate-frontend.vercel.app
app.cors.allowed-origins=http://localhost:5173,http://127.0.0.1:5173,${FRONTEND_URL}

# --- LOGGING ---
logging.level.root=INFO
logging.level.com.nutrimate=INFO
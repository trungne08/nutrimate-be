# D√πng bi·∫øn m√¥i tr∆∞·ªùng t·ª´ file .env (local) ho·∫∑c Render (production)
spring.datasource.url=jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}?ssl-mode=REQUIRED
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}

# --- SERVER CONFIG ---
# üëá Gi√∫p OAuth2 v√† Swagger nh·∫≠n di·ªán ƒë√∫ng HTTPS tr√™n Railway/Render
server.forward-headers-strategy=native

# --- SESSION COOKIE (LOCAL DEFAULT) ---
# Khi FE ch·∫°y localhost v√† BE deploy domain kh√°c (cross-site), cookie c·∫ßn SameSite=None + Secure=true.
# Nh∆∞ng n·∫øu b·∫°n ch·∫°y BE local (http://localhost), Secure=true s·∫Ω l√†m cookie kh√¥ng set ƒë∆∞·ª£c.
# V√¨ v·∫≠y: default ƒë·ªÉ Lax/secure=false v√† override b·∫±ng env khi c·∫ßn.
server.servlet.session.cookie.same-site=${SESSION_COOKIE_SAMESITE:lax}
server.servlet.session.cookie.secure=${SESSION_COOKIE_SECURE:false}
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.path=/
spring.servlet.multipart.max-file-size=20MB
spring.servlet.multipart.max-request-size=20MB

# C√°c c·∫•u h√¨nh kh√°c gi·ªØ nguy√™n
# D√πng validate thay v√¨ update ƒë·ªÉ tr√°nh Hibernate t·ª± ƒë·ªông thay ƒë·ªïi schema khi c√≥ foreign key constraints
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
# T·∫Øt globally_quoted_identifiers ƒë·ªÉ tr√°nh l·ªói SQL syntax v·ªõi ENUM
spring.jpa.properties.hibernate.globally_quoted_identifiers=false

# --- COGNITO (D√πng bi·∫øn m√¥i tr∆∞·ªùng) ---
spring.security.oauth2.client.registration.cognito.client-id=${COGNITO_CLIENT_ID}
spring.security.oauth2.client.registration.cognito.client-secret=${COGNITO_CLIENT_SECRET}
spring.security.oauth2.client.registration.cognito.scope=openid,email,profile
spring.security.oauth2.client.registration.cognito.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}
spring.security.oauth2.client.registration.cognito.authorization-grant-type=authorization_code
spring.security.oauth2.client.provider.cognito.issuer-uri=${COGNITO_ISSUER_URI}
spring.security.oauth2.client.registration.cognito.client-name=Cognito
spring.security.oauth2.resourceserver.jwt.issuer-uri=${COGNITO_ISSUER_URI}
# --- Application URLs (c√≥ th·ªÉ override b·∫±ng environment variables) ---
app.frontend.url=${FRONTEND_URL:http://localhost:5173}
app.backend.url=${BACKEND_URL:http://localhost:8080}

# --- SWAGGER UI CONFIG ---
# Sort tags theo alphabet trong Swagger UI
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.operationsSorter=alpha